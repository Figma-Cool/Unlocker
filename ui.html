<button id="unlock">All Unlock</button>
<ul></ul>
<footer>
  Made by <a target="_blank" href="https://figma.cool">Figma.Cool</a>
</footer>

<script>
  const ul = document.querySelector("ul");
  const unlockBtn = document.querySelector("#unlock");

  function createList(textContent) {
    let li = document.createElement("li");
    li.textContent = textContent;
    ul.appendChild(li);
  }

  unlockBtn.addEventListener("click", () => {
    parent.postMessage(
      { pluginMessage: { type: "all-unlock", click: "all" } },
      "*"
    );
    ul.innerHTML = "";
    createList("ðŸ”“");
  });

  window.onmessage = async (event) => {
    const message = event.data.pluginMessage;
    if (message.isLockArr) {
      message.isLockArr.forEach((item) => {
        createList(item);
      });

      ul.querySelectorAll("li").forEach((item) => {
        item.addEventListener("click", () => {
          message.isLockArr.forEach((item) => {
            console.log(item.name);
            parent.postMessage(
              { pluginMessage: { type: "lock-item", lockItem: item.name } },
              "*"
            );
          });
        });
      });
    }

    if (message.empty == 0) {
      ul.innerHTML = "";
      createList("ðŸ”“");
    }
  };
</script>
<style>
  * {
    margin: 0;
    padding: 0;
  }

  body {
    font-family: -apple-system, sans-serif;
    color: #8b8eab;
  }

  a {
    text-decoration: none;
    color: #3d4373;
  }

  a:hover {
    text-decoration: underline;
  }

  input {
    width: 100%;
    height: 48px;
  }

  footer {
    width: calc(100% - 24px);
    padding: 8px 12px;
    position: fixed;
    bottom: 0;
    left: 0;
    background-color: white;
    text-align: right;
    font-size: 12px;
    line-height: 12px;
    color: #8b8eab;
    border-top: 1px solid #e5e5e5;
  }

  iframe {
    width: 600px;
    height: 420px;
  }
</style>
